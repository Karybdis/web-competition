// id                      序号
// year                    获奖年度
// grade                   获奖级别
// name                    竞赛名称
// total_students          学生姓名
// teacher1                指导教师1
// teacher2                指导教师2
// belong                  所属单位
// approval_status         审核状态
// certificate             证书地址
index=1;window.onload=function(){document.getElementById("first").style.display="block";document.getElementById("sec").style.display="none"};new Vue({el:"#first-link",methods:{show_first:function(){document.getElementById("first").style.display="block";document.getElementById("sec").style.display="none";document.getElementById("page-title").innerText="\u7ade\u8d5b\u6863\u6848\u5217\u8868"}}});new Vue({el:"#sec-link",methods:{show_sec:function(){document.getElementById("sec").style.display="block";document.getElementById("first").style.display="none";document.getElementById("page-title").innerText="\u6dfb\u52a0\u6863\u6848"}}});var message_table=new Vue({el:"#total-message",data:{competitions:[]},mounted:function(){this.$nextTick(function(){$.get("http://106.14.223.207:8081/competition/list",function(b){$.each(b,function(b,a){message_table.competitions.push({id:a.id,year:a.year,grade:a.year,name:a.name,total_students:a.student1+(""==a.student2?"":"\u3001"+a.student2)+(""==a.student3?"":"\u3001"+a.student3),teacher1:a.teacher1,teacher2:a.teacher2,belong:a.belong,approval_status:a.status,certificate:a.certificate})})})})},methods:{delete_c:function(b){var c={id:b};console.log(b);$.ajax({url:"http://106.14.223.207:8081/competition/",data:JSON.stringify(c),type:"delete",contentType:"application/json;charset\x3dutf-8",success:function(a){location.reload()}})}}}),query_table=new Vue({el:"#query-message",data:{query_json:{year:"",grade:"",name:"",student:"",teacher:""}},methods:{query:function(){console.log(query_table.query_json);$.ajax({url:"http://106.14.223.207:8081/competition/query",data:JSON.stringify(query_table.query_json),type:"post",contentType:"application/json;charset\x3dutf-8",success:function(b){$.each(message_table.competitions,function(b,a){message_table.competitions.pop()});$.each(b,function(b,a){message_table.competitions.push({id:a.id,year:a.year,grade:a.grade,name:a.name,total_students:a.student1+(""==a.student2?"":"\u3001"+a.student2)+(""==a.student3?"":"\u3001"+a.student3),teacher1:a.teacher1,teacher2:a.teacher2,belong:a.belong,approval_status:a.status,certificate:a.certificate})})}})}}}),add_table=new Vue({el:"#add-message",data:{add_json:{year:"",grade:"",name:"",student1:"",student2:"",student3:"",teacher1:"",teacher2:"",belong:"",status:"",certificate:""}},methods:{add:function(){$.ajax({url:"http://106.14.223.207:8081/competition/",data:JSON.stringify(add_table.add_json),type:"post",contentType:"application/json;charset\x3dutf-8",success:function(b){location.reload()}})}}}),ceritificate_pic=new Vue({el:"#post-certificate",data:{file:""},methods:{post_pic:function(){var b=new FormData;b.append("file",ceritificate_pic.file);console.log(b.file);$.ajax({url:"http://106.14.223.207:8081/competition/upload",data:b,type:"post",contentType:!1,processData:!1,success:function(b){add_table.add_json.certificate=b;document.getElementById("preview").src=b;document.getElementById("oktoload").style.display="inline-flex"}})},changeImage:function(b){var c=b.target.files[0];b=new FileReader;var a=this;b.readAsDataURL(c);b.onload=function(b){a.pic=this.result;ceritificate_pic.file=c;document.getElementById("preview").src=b.target.result}}}});